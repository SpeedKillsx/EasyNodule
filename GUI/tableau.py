# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'tableau.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import sys
from utils.Database_methods import *
from PyQt5.QtWidgets import *
from PyQt5.Qt import *
class Ui_MainWindow(object):
        def setupUi(self, MainWindow):
                MainWindow.setObjectName("MainWindow")
                MainWindow.resize(800, 600)
                self.centralwidget = QtWidgets.QWidget(MainWindow)
                self.centralwidget.setObjectName("centralwidget")
                self.tableWidget = QtWidgets.QTableWidget(self.centralwidget)
                self.tableWidget.setGeometry(QtCore.QRect(300, 80, 411, 251))
                self.tableWidget.setObjectName("tableWidget")
                self.tableWidget.setColumnCount(11)
                self.tableWidget.setRowCount(0)
                self.Nom = QtWidgets.QLabel(self.centralwidget)
                self.Nom.setGeometry(QtCore.QRect(330, 20, 41, 21))
                self.Nom.setObjectName("Nom")
                self.NameP = QtWidgets.QTextEdit(self.centralwidget)
                self.NameP.setGeometry(QtCore.QRect(380, 20, 104, 21))
                self.NameP.setObjectName("NameP")
                self.Gender = QtWidgets.QLabel(self.centralwidget)
                self.Gender.setGeometry(QtCore.QRect(330, 60, 41, 21))
                self.Gender.setObjectName("Gender")
                self.SexP = QtWidgets.QTextEdit(self.centralwidget)
                self.SexP.setGeometry(QtCore.QRect(380, 60, 104, 21))
                self.SexP.setObjectName("SexP")
                self.Wilaya = QtWidgets.QLabel(self.centralwidget)
                self.Wilaya.setGeometry(QtCore.QRect(500, 20, 41, 21))
                self.Wilaya.setObjectName("Wilaya")
                self.WilayaP = QtWidgets.QTextEdit(self.centralwidget)
                self.WilayaP.setGeometry(QtCore.QRect(550, 20, 104, 21))
                self.WilayaP.setObjectName("WilayaP")
                self.Smok = QtWidgets.QLabel(self.centralwidget)
                self.Smok.setGeometry(QtCore.QRect(500, 60, 31, 21))
                self.Smok.setObjectName("Smok")
                self.SmokP = QtWidgets.QTextEdit(self.centralwidget)
                self.SmokP.setGeometry(QtCore.QRect(550, 60, 104, 21))
                self.SmokP.setObjectName("SmokP")
                self.Allergies = QtWidgets.QLabel(self.centralwidget)
                self.Allergies.setGeometry(QtCore.QRect(330, 100, 41, 21))
                self.Allergies.setObjectName("Allergies")
                self.AlleP = QtWidgets.QTextEdit(self.centralwidget)
                self.AlleP.setGeometry(QtCore.QRect(380, 100, 104, 21))
                self.AlleP.setObjectName("AlleP")
                self.medicalH = QtWidgets.QLabel(self.centralwidget)
                self.medicalH.setGeometry(QtCore.QRect(500, 100, 41, 21))
                self.medicalH.setObjectName("medicalH")
                self.MedHP = QtWidgets.QTextEdit(self.centralwidget)
                self.MedHP.setGeometry(QtCore.QRect(550, 100, 104, 21))
                self.MedHP.setObjectName("MedHP")
                self.add = QtWidgets.QPushButton(self.centralwidget)
                self.add.setGeometry(QtCore.QRect(330, 320, 75, 23))
                self.add.setObjectName("add")
                self.hide = QtWidgets.QPushButton(self.centralwidget)
                self.hide.setGeometry(QtCore.QRect(600, 320, 75, 23))
                self.hide.setObjectName("hide")
                self.BirthP = QtWidgets.QDateEdit(self.centralwidget)
                self.BirthP.setGeometry(QtCore.QRect(380, 140, 110, 22))
                self.BirthP.setObjectName("BirthP")
                self.CancerFP = QtWidgets.QTextEdit(self.centralwidget)
                self.CancerFP.setGeometry(QtCore.QRect(550, 140, 104, 21))
                self.CancerFP.setObjectName("CancerFP")
                self.CancerF = QtWidgets.QLabel(self.centralwidget)
                self.CancerF.setGeometry(QtCore.QRect(500, 140, 41, 21))
                self.CancerF.setObjectName("CancerF")
                self.Birth = QtWidgets.QLabel(self.centralwidget)
                self.Birth.setGeometry(QtCore.QRect(330, 140, 41, 21))
                self.Birth.setObjectName("Birth")
                self.PhoneP = QtWidgets.QTextEdit(self.centralwidget)
                self.PhoneP.setGeometry(QtCore.QRect(550, 190, 104, 21))
                self.PhoneP.setObjectName("PhoneP")
                self.Email = QtWidgets.QLabel(self.centralwidget)
                self.Email.setGeometry(QtCore.QRect(330, 190, 41, 21))
                self.Email.setObjectName("Email")
                self.Phone = QtWidgets.QLabel(self.centralwidget)
                self.Phone.setGeometry(QtCore.QRect(500, 190, 41, 21))
                self.Phone.setObjectName("Phone")
                self.EmailP = QtWidgets.QTextEdit(self.centralwidget)
                self.EmailP.setGeometry(QtCore.QRect(380, 190, 104, 21))
                self.EmailP.setObjectName("EmailP")
                self.Nom.hide()
                self.Wilaya.hide()
                self.Birth.hide()
                self.CancerF.hide()
                self.Allergies.hide()
                self.Email.hide()
                self.Phone.hide()
                self.Gender.hide()
                self.Smok.hide()
                self.medicalH.hide()
                
                
                self.NameP.hide()
                self.WilayaP.hide()
                self.BirthP.hide()
                self.CancerFP.hide()
                self.AlleP.hide()
                self.EmailP.hide()
                self.PhoneP.hide()
                self.SexP.hide()
                self.SmokP.hide()
                self.MedHP.hide()
                MainWindow.setCentralWidget(self.centralwidget)
                self.menubar = QtWidgets.QMenuBar(MainWindow)
                self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))
                self.menubar.setObjectName("menubar")
                MainWindow.setMenuBar(self.menubar)
                self.statusbar = QtWidgets.QStatusBar(MainWindow)
                self.statusbar.setObjectName("statusbar")
                MainWindow.setStatusBar(self.statusbar)

                self.retranslateUi(MainWindow)
                QtCore.QMetaObject.connectSlotsByName(MainWindow)
                self.hide.clicked.connect(self.hideL)
                self.add.clicked.connect(self.addPatient)
                self.tableWidget.itemSelectionChanged.connect(self.handle_item_selection)
                self.add_data()

        def retranslateUi(self, MainWindow):
                _translate = QtCore.QCoreApplication.translate
                MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
                self.Nom.setText(_translate("MainWindow", "Nom"))
                self.Gender.setText(_translate("MainWindow", "Sex"))
                self.Wilaya.setText(_translate("MainWindow", "W"))
                self.Smok.setText(_translate("MainWindow", "Smok"))
                self.Allergies.setText(_translate("MainWindow", "Alle"))
                self.medicalH.setText(_translate("MainWindow", "medical"))
                self.add.setText(_translate("MainWindow", "ajouter"))
                self.hide.setText(_translate("MainWindow", "hide"))
                self.CancerF.setText(_translate("MainWindow", "CancerF"))
                self.Birth.setText(_translate("MainWindow", "Birth"))
                self.Email.setText(_translate("MainWindow", "Email"))
                self.Phone.setText(_translate("MainWindow", "Phone"))
        def hideL(self):
                self.tableWidget.hide()
                
                """self.textEdit_6.show()
                self.textEdit_5.show()
                self.textEdit_4.show()
                self.textEdit_3.show()
                self.textEdit_2.show()
                self.textEdit.show()"""
                
                self.Nom.show()
                self.Wilaya.show()
                self.Birth.show()
                self.CancerF.show()
                self.Allergies.show()
                self.Email.show()
                self.Phone.show()
                self.Gender.show()
                self.Smok.show()
                self.medicalH.show()
                
                
                self.NameP.show()
                self.WilayaP.show()
                self.BirthP.show()
                self.CancerFP.show()
                self.AlleP.show()
                self.EmailP.show()
                self.PhoneP.show()
                self.SexP.show()
                self.SmokP.show()
                self.MedHP.show()
                
                
                
        def addPatient(self):
                if PatientResearchPhoneName(self.PhoneP.toPlainText(),self.NameP.toPlainText()) == 1:
                        print("Patient already exist")
                else:
                        PatientInsert(self.NameP.toPlainText(),self.BirthP.text(),self.WilayaP.toPlainText(), self.SexP.toPlainText(),
                                      self.AlleP.toPlainText(), self.SmokP.toPlainText(), self.MedHP.toPlainText(),
                                      self.CancerFP.toPlainText(),self.EmailP.toPlainText(), self.PhoneP.toPlainText())
                        print("added")
                        self.Nom.hide()
                        self.Wilaya.hide()
                        self.Birth.hide()
                        self.CancerF.hide()
                        self.Allergies.hide()
                        self.Email.hide()
                        self.Phone.hide()
                        self.Gender.hide()
                        self.Smok.hide()
                        self.medicalH.hide()
                        
                        
                        self.NameP.hide()
                        self.WilayaP.hide()
                        self.BirthP.hide()
                        self.CancerFP.hide()
                        self.AlleP.hide()
                        self.EmailP.hide()
                        self.PhoneP.hide()
                        self.SexP.hide()
                        self.SmokP.hide()
                        self.MedHP.hide()
                        
                        self.tableWidget.show()
                        self.add_data()
        def add_data(self):
        
                row_count = self.tableWidget.rowCount()
                print(row_count)
                self.tableWidget.insertRow(row_count)
                
                
                if PatientResearchPhoneName("", "") == 1:
                        data = PatientInfoByPhoneName("0562", "dc")
                        id_item = QTableWidgetItem(str(data[0]))
                        name_item = QTableWidgetItem(str(data[1]))
                        birthday_item = QTableWidgetItem(data[2])
                        wilaya_item = QTableWidgetItem(str(data[3]))
                        sex_item = QTableWidgetItem(str(data[4]))
                        allergies_item = QTableWidgetItem(data[5])
                        smoking_item = QTableWidgetItem(str(data[6]))
                        medhist_item = QTableWidgetItem(str(data[7]))
                        cancerf_item = QTableWidgetItem(str(data[8]))
                        eamil_item = QTableWidgetItem(str(data[9]))
                        phone_item = QTableWidgetItem(str(data[10]))
                        
                        self.tableWidget.setItem(0, 0, id_item)
                        self.tableWidget.setItem(row_count, 1, name_item)
                        self.tableWidget.setItem(row_count, 2, birthday_item)
                        self.tableWidget.setItem(row_count, 3, wilaya_item)
                        self.tableWidget.setItem(row_count, 4, sex_item)
                        self.tableWidget.setItem(row_count, 5, allergies_item)
                        self.tableWidget.setItem(row_count, 6, smoking_item)
                        self.tableWidget.setItem(row_count, 7, medhist_item)
                        self.tableWidget.setItem(row_count, 8, cancerf_item)
                        self.tableWidget.setItem(row_count, 9, eamil_item)
                        self.tableWidget.setItem(row_count, 10, phone_item)
                else:
                        data = PatientInfoByPhoneName("", "")
                        data = list(data)
                        print(len(data))
                        if row_count == 0:
                                for i in range(len(data)):
                                        self.tableWidget.insertRow(row_count)
                                        id_item = QTableWidgetItem(str(data[i][0]))
                                        name_item = QTableWidgetItem(str(data[i][1]))
                                        birthday_item = QTableWidgetItem(data[i][2])
                                        wilaya_item = QTableWidgetItem(str(data[i][3]))
                                        sex_item = QTableWidgetItem(str(data[i][4]))
                                        allergies_item = QTableWidgetItem(data[i][5])
                                        smoking_item = QTableWidgetItem(str(data[i][6]))
                                        medhist_item = QTableWidgetItem(str(data[i][7]))
                                        cancerf_item = QTableWidgetItem(str(data[i][8]))
                                        eamil_item = QTableWidgetItem(str(data[i][9]))
                                        phone_item = QTableWidgetItem(str(data[i][10]))
                                        self.tableWidget.setItem(row_count, 0, id_item)
                                        self.tableWidget.setItem(row_count, 1, name_item)
                                        self.tableWidget.setItem(row_count, 2, birthday_item)
                                        self.tableWidget.setItem(row_count, 3, wilaya_item)
                                        self.tableWidget.setItem(row_count, 4, sex_item)
                                        self.tableWidget.setItem(row_count, 5, allergies_item)
                                        self.tableWidget.setItem(row_count, 6, smoking_item)
                                        self.tableWidget.setItem(row_count, 7, medhist_item)
                                        self.tableWidget.setItem(row_count, 8, cancerf_item)
                                        self.tableWidget.setItem(row_count, 9, eamil_item)
                                        self.tableWidget.setItem(row_count, 10, phone_item)
                                        row_count = row_count + 1
                        else:
                                id_item = QTableWidgetItem(str(data[-1][0]))
                                name_item = QTableWidgetItem(str(data[-1][1]))
                                birthday_item = QTableWidgetItem(data[-1][2])
                                wilaya_item = QTableWidgetItem(str(data[-1][3]))
                                sex_item = QTableWidgetItem(str(data[-1][4]))
                                allergies_item = QTableWidgetItem(data[-1][5])
                                smoking_item = QTableWidgetItem(str(data[-1][6]))
                                medhist_item = QTableWidgetItem(str(data[-1][7]))
                                cancerf_item = QTableWidgetItem(str(data[-1][8]))
                                eamil_item = QTableWidgetItem(str(data[-1][9]))
                                phone_item = QTableWidgetItem(str(data[-1][10]))
                                
                                self.tableWidget.setItem(row_count-1, 0, id_item)
                                self.tableWidget.setItem(row_count-1, 1, name_item)
                                self.tableWidget.setItem(row_count-1, 2, birthday_item)
                                self.tableWidget.setItem(row_count-1, 3, wilaya_item)
                                self.tableWidget.setItem(row_count-1, 4, sex_item)
                                self.tableWidget.setItem(row_count-1, 5, allergies_item)
                                self.tableWidget.setItem(row_count-1, 6, smoking_item)
                                self.tableWidget.setItem(row_count-1, 7, medhist_item)
                                self.tableWidget.setItem(row_count-1, 8, cancerf_item)
                                self.tableWidget.setItem(row_count-1, 9, eamil_item)
                                self.tableWidget.setItem(row_count-1, 10, phone_item)
                                
                                
                self.tableWidget.horizontalHeader().setStretchLastSection(True)
        def handle_item_selection(self):
                selected_row = self.tableWidget.currentRow()
                if selected_row >= 0:
                        name = self.tableWidget.item(selected_row, 0).text()
                        gender = self.tableWidget.item(selected_row, 1).text()
                        wilaya = self.tableWidget.item(selected_row, 2).text()
                        smok = self.tableWidget.item(selected_row, 3).text()
                        allergies = self.tableWidget.item(selected_row, 4).text()
                        medical_history = self.tableWidget.item(selected_row, 5).text()
                        birth = self.tableWidget.item(selected_row, 6).text()
                        cancer_family = self.tableWidget.item(selected_row, 7).text()
                        email = self.tableWidget.item(selected_row, 8).text()
                        phone = self.tableWidget.item(selected_row, 9).text()
                        
                        # Utilisez les valeurs récupérées comme vous le souhaitez
                        print("Nom:", name)
                        print("Sexe:", gender)
                        print("Wilaya:", wilaya)
                        print("Smok:", smok)
                        print("Allergies:", allergies)
                        print("Antécédents médicaux:", medical_history)
                        print("Date de naissance:", birth)
                        print("Antécédents de cancer familiaux:", cancer_family)
                        print("Email:", email)
                        print("Téléphone:", phone)
                        
        


if __name__ == "__main__":
    app = QApplication(sys.argv)

    window = QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(window)
    
    window.show()
    
    sys.exit(app.exec_())
